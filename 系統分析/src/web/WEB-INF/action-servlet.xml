<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

    <bean id="exceptionResolver" class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
        <property name="exceptionMappings">
            <props>
                <prop key="org.springframework.dao.DataAccessException">
                    dataAccessFailure
                </prop>
            </props>
        </property>
    </bean>

    <bean id="userController" class="com.foxconn.cic.webapp.action.UserController">
        <property name="userManager" ref="userManager"/>
    </bean>

    <bean id="passwordHintController" class="com.foxconn.cic.webapp.action.PasswordHintController">
        <property name="userManager" ref="userManager"/>
        <property name="messageSource" ref="messageSource"/>
        <property name="mailEngine" ref="mailEngine"/>
        <property name="message" ref="mailMessage"/>
    </bean>

    <bean id="reloadController" class="com.foxconn.cic.webapp.action.ReloadController"/>

    <bean id="userFormController" class="com.foxconn.cic.webapp.action.UserFormController">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="userForm"/>
        <property name="successView" value="redirect:users.html"/>
        <property name="cancelView" value="redirect:mainMenu.html"/>
        <property name="userManager" ref="userManager"/>
        <property name="roleManager" ref="roleManager"/>
        <property name="mailEngine" ref="mailEngine"/>
        <property name="message" ref="mailMessage"/>
        <property name="templateName" value="accountCreated.vm"/>
    </bean>

    <bean id="fileUploadController" class="com.foxconn.cic.webapp.action.FileUploadController">
        <property name="validator" ref="beanValidator"/>
        <property name="cancelView" value="redirect:mainMenu.html"/>
        <property name="formView" value="uploadForm"/>
        <property name="successView" value="uploadDisplay"/>
    </bean>

    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <property name="maxUploadSize" value="2097152"/>
    </bean>

    <bean id="signupController" class="com.foxconn.cic.webapp.action.SignupController">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="signup"/>
        <property name="successView" value="redirect:mainMenu.html"/>
        <property name="userManager" ref="userManager"/>
        <property name="roleManager" ref="roleManager"/>
        <property name="mailEngine" ref="mailEngine"/>
        <property name="message" ref="mailMessage"/>
        <property name="templateName" value="accountCreated.vm"/>
    </bean>

    <bean id="parameterMethodResolver"
        class="org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver">
        <property name="paramName"><value>method</value></property>
        <property name="defaultMethodName"><value>list</value></property>
    </bean>



    <!--Keyword-BEAN-START-->
    <bean id="keywordController" class="com.foxconn.cic.webapp.action.KeywordController" autowire="byName"/>

    <bean id="keywordFormController" class="com.foxconn.cic.webapp.action.KeywordFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="keywordForm"/>
        <property name="successView" value="redirect:keywords.html"/>
    </bean>
    <!--Keyword-BEAN-END-->



    <!--CatalogType-BEAN-START-->
    <bean id="catalogTypeController" class="com.foxconn.cic.webapp.action.CatalogTypeController" autowire="byName"/>

    <bean id="catalogTypeFormController" class="com.foxconn.cic.webapp.action.CatalogTypeFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="catalogTypeForm"/>
        <property name="successView" value="redirect:catalogTypes.html"/>
    </bean>
    <!--CatalogType-BEAN-END-->

    <!--Catalog-BEAN-START-->
    <bean id="catalogController" class="com.foxconn.cic.webapp.action.CatalogController" autowire="byName">
    	<property name="methodNameResolver" ref="parameterMethodResolver"/>
    	<property name="browserPage" value="catalog"/>
    	<property name="ajaxTreeXml" value="catalogAjaxTreeXml"></property>
    </bean>

    <bean id="catalogFormController" class="com.foxconn.cic.webapp.action.CatalogFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="catalogForm"/>
        <property name="successView" value="redirect:catalogs.html"/>
    </bean>
    <!--Catalog-BEAN-END-->
    <!--News-BEAN-START-->
	<bean id="feedView"  class="com.foxconn.cic.webapp.view.NewsRSSView"/>
    <bean id="newsController" class="com.foxconn.cic.webapp.action.NewsController" autowire="byName">
    	<property name="methodNameResolver" ref="parameterMethodResolver"/>
    	<property name="browserPage" value="newsBrowser"/>
    	<property name="feedView" ref="feedView"/>
    </bean>
    <bean id="newsFormController" class="com.foxconn.cic.webapp.action.NewsFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="newsForm"/>
        <property name="successView" value="redirect:newss.html"/>
    </bean>
    <!--News-BEAN-END-->
    <!--Website-BEAN-START-->
    <bean id="opmlView"  class="com.foxconn.cic.webapp.view.RssOPMLView"/>
    <bean id="textView"  class="com.foxconn.cic.webapp.view.TextView"/>
    <bean id="websiteController" class="com.foxconn.cic.webapp.action.WebsiteController" autowire="byName">
    	<property name="methodNameResolver" ref="parameterMethodResolver"/>
    	<property name="opmlView" ref="opmlView"/>
    	<property name="textView" ref="textView"/>
    </bean>

    <bean id="websiteFormController" class="com.foxconn.cic.webapp.action.WebsiteFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="websiteForm"/>
        <property name="successView" value="redirect:searchWebsite.html"/>
    </bean>
    <!--Website-BEAN-END-->

    <!--NewsImage-BEAN-START-->
    <bean id="newsImageController" class="com.foxconn.cic.webapp.action.NewsImageController" autowire="byName">
    	<property name="methodNameResolver" ref="parameterMethodResolver"/>
    	<property name="imageView" ref="newsImageView"/>
    </bean>
 	<bean id="newsImageView"  class="com.foxconn.cic.webapp.view.ImageView"/>
    <bean id="newsImageFormController" class="com.foxconn.cic.webapp.action.NewsImageFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="newsImageForm"/>
        <property name="successView" value="redirect:newsImages.html"/>
    </bean>
    <!--NewsImage-BEAN-END-->
    <!--Material-BEAN-START-->
    <bean id="materialController" class="com.foxconn.cic.webapp.action.MaterialController" autowire="byName"/>

    <bean id="materialFormController" class="com.foxconn.cic.webapp.action.MaterialFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="materialForm"/>
        <property name="successView" value="redirect:materials.html"/>
    </bean>
    <!--Material-BEAN-END-->
    <!--Price-BEAN-START-->
    <bean id="priceController" class="com.foxconn.cic.webapp.action.PriceController" autowire="byName"/>

    <bean id="priceFormController" class="com.foxconn.cic.webapp.action.PriceFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="priceForm"/>
        <property name="successView" value="redirect:prices.html"/>
    </bean>
    <!--Price-BEAN-END-->
    <!--ExchangeRate-BEAN-START-->
    <bean id="exchangeRateController" class="com.foxconn.cic.webapp.action.ExchangeRateController" autowire="byName"/>

    <bean id="exchangeRateFormController" class="com.foxconn.cic.webapp.action.ExchangeRateFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="exchangeRateForm"/>
        <property name="successView" value="redirect:exchangeRates.html"/>
    </bean>
    <!--ExchangeRate-BEAN-END-->
    <!--InterestRate-BEAN-START-->
    <bean id="interestRateController" class="com.foxconn.cic.webapp.action.InterestRateController" autowire="byName"/>

    <bean id="interestRateFormController" class="com.foxconn.cic.webapp.action.InterestRateFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="interestRateForm"/>
        <property name="successView" value="redirect:interestRates.html"/>
    </bean>
    <!--InterestRate-BEAN-END-->
    
    
    
    
    
    <!--UserActivityLog-BEAN-START-->
    <bean id="userActivityLogController" class="com.foxconn.cic.webapp.action.UserActivityLogController" autowire="byName"/>

    <bean id="userActivityLogFormController" class="com.foxconn.cic.webapp.action.UserActivityLogFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="userActivityLogForm"/>
        <property name="successView" value="redirect:userActivityLogs.html"/>
    </bean>
    <!--UserActivityLog-BEAN-END-->
    
    
    <!--Quoter-BEAN-START-->
    <bean id="quoterController" class="com.foxconn.cic.webapp.action.QuoterController" autowire="byName"/>

    <bean id="quoterFormController" class="com.foxconn.cic.webapp.action.QuoterFormController" autowire="byName">
        <property name="validator" ref="beanValidator"/>
        <property name="formView" value="quoterForm"/>
        <property name="successView" value="redirect:quoters.html"/>
        <property name="websiteManager" ref="websiteManager"/>
    </bean>
    <!--Quoter-BEAN-END-->
    <!-- Add additional controller beans here -->



    <!-- Load WEB-INF/classes/ApplicationResources.properties for i18n messages using JSTL's fmt tag -->
    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basename" value="ApplicationResources"/>
    </bean>

    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="/editProfile.html">userFormController</prop>
                <prop key="/mainMenu.html">filenameController</prop>
                <prop key="/editUser.html">userFormController</prop>
                <prop key="/selectFile.html">fileUploadController</prop>
                <prop key="/uploadFile.html">fileUploadController</prop>
                <prop key="/passwordHint.html">passwordHintController</prop>
                <prop key="/signup.html">signupController</prop>
                <prop key="/news.service">httpNewsManager</prop>
                <prop key="/newsImage.service">httpNewsImageManager</prop>
                <prop key="/newsImageHelper.service">httpNewsImageHelper</prop>
                <prop key="/website.service">httpWebsiteManager</prop>
                <prop key="/keyword.service">httpKeywordManager</prop>
                <prop key="/website.service">httpWebsiteManager</prop>
                <prop key="/price.service">httpPriceManager</prop>
                <prop key="/exchangeRate.service">httpExchangeRateManager</prop>
                <prop key="/interestRate.service">httpInterestRateManager</prop>
                <prop key="/search.html">searchController</prop>
				<prop key="/reindex.html">indexController</prop>
				<prop key="/indexManager.html">indexManagerController</prop>
				<prop key="/searchWebsite.html">websiteSearchController</prop>
				<prop key="/reindexWebsite.html">websiteIndexController</prop>


                <!--Keyword-URL-START-->
                <prop key="/keywords.html">keywordController</prop>
                <prop key="/editKeyword.html">keywordFormController</prop>
                <!--Keyword-URL-END-->
               <!--CatalogType-URL-START-->
                <prop key="/catalogTypes.html">catalogTypeController</prop>
                <prop key="/editCatalogType.html">catalogTypeFormController</prop>
                <!--CatalogType-URL-END-->
                <!--Catalog-URL-START-->
                <prop key="/catalogs.html">catalogController</prop>
                <prop key="/editCatalog.html">catalogFormController</prop>
                <!--Catalog-URL-END-->
                <!--News-URL-START-->
                <prop key="/newss.html">newsController</prop>
                <prop key="/editNews.html">newsFormController</prop>
                <!--News-URL-END-->
                <!--Website-URL-START-->
                <prop key="/websites.html">websiteController</prop>
                <prop key="/editWebsite.html">websiteFormController</prop>
                <!--Website-URL-END-->
                <!--NewsImage-URL-START-->
                <prop key="/newsImages.html">newsImageController</prop>
                <prop key="/editNewsImage.html">newsImageFormController</prop>
                <!--NewsImage-URL-END-->
                <!--Material-URL-START-->
                <prop key="/materials.html">materialController</prop>
                <prop key="/editMaterial.html">materialFormController</prop>
                <!--Material-URL-END-->
                <!--Price-URL-START-->
                <prop key="/prices.html">priceController</prop>
                <prop key="/editPrice.html">priceFormController</prop>
                <!--Price-URL-END-->
                <!--ExchangeRate-URL-START-->
                <prop key="/exchangeRates.html">exchangeRateController</prop>
                <prop key="/editExchangeRate.html">exchangeRateFormController</prop>
                <!--ExchangeRate-URL-END-->
                <!--InterestRate-URL-START-->
                <prop key="/interestRates.html">interestRateController</prop>
                <prop key="/editInterestRate.html">interestRateFormController</prop>
                <!--InterestRate-URL-END-->
                <!--UserActivityLog-URL-START-->
                <prop key="/userActivityLogs.html">userActivityLogController</prop>
                <prop key="/editUserActivityLog.html">userActivityLogFormController</prop>
                <!--UserActivityLog-URL-END-->
                <!--Quoter-URL-START-->
                <prop key="/quoters.html">quoterController</prop>
                <prop key="/editQuoter.html">quoterFormController</prop>
                <!--Quoter-URL-END-->
                <!-- Add additional URL mappings here -->


            </props>
        </property>
    </bean>

    <bean id="adminUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="interceptors">
            <list>
                <ref bean="adminInterceptor"/>
            </list>
        </property>
        <property name="mappings">
            <props>
                <prop key="/activeUsers.html">filenameController</prop>
                <prop key="/users.html">userController</prop>
                <prop key="/flushCache.html">filenameController</prop>
                <prop key="/reload.html">reloadController</prop>
            </props>
        </property>
    </bean>

    <bean id="adminInterceptor" class="org.springframework.web.servlet.handler.UserRoleAuthorizationInterceptor">
        <property name="authorizedRoles" value="admin"/>
    </bean>

    <bean id="filenameController" class="org.springframework.web.servlet.mvc.UrlFilenameViewController"/>

    <!-- View Resolver for JSPs -->
    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="requestContextAttribute" value="rc"/>
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/pages/"/>
        <property name="suffix" value=".jsp"/>
    </bean>


    <!-- ====  COMPASS SEARCH CONTROLLER start ==== -->
	<bean id="searchController"
		class="com.foxconn.cic.webapp.action.NewsSearchController">
		<property name="compass">
			<ref bean="compass" />
		</property>
		<property name="searchView">
			<value>search</value>
		</property>
		<property name="searchResultsView">
			<value>search</value>
		</property>
		<property name="newsFacade" ref="newsFacade">
		</property>
	</bean>

	<bean id="indexController"
		class="com.foxconn.cic.webapp.action.NewsIndexController">
		<property name="compassGps">
			<ref bean="compassGps" />
		</property>
		<property name="indexView">
			<value>reindex</value>
		</property>
		<property name="indexResultsView">
			<value>reindex</value>
		</property>
	</bean>

	<bean id="indexManagerController"
		class="com.foxconn.cic.webapp.action.IndexController">
		<property name="indexManager" ref="indexManager"/>
		<property name="newsManager" ref="newsManager"/>
		<property name="methodNameResolver" ref="parameterMethodResolver"/>
		<property name="indexView">
			<value>reindex</value>
		</property>
		<property name="indexResultsView">
			<value>reindex</value>
		</property>
	</bean>
	<bean id="websiteSearchController"
		class="org.compass.spring.web.mvc.CompassSearchController">
		<property name="compass">
			<ref bean="compass2" />
		</property>
		<property name="searchView">
			<value>searchWebsite</value>
		</property>
		<property name="searchResultsView">
			<value>searchWebsite</value>
		</property>
	</bean>
	<bean id="websiteIndexController"
		class="org.compass.spring.web.mvc.CompassIndexController">
		<property name="compassGps">
			<ref bean="compassGps2" />
		</property>
		<property name="indexView">
			<value>reindexWebsite</value>
		</property>
		<property name="indexResultsView">
			<value>reindexWebsite</value>
		</property>
	</bean>
	<!-- ====  COMPASS SEARCH CONTROLLER end ==== -->
</beans>
